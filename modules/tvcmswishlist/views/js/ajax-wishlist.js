var wishlistProductsIds=[];jQuery(document).ready(function(a){wishlistRefreshStatus();a(document).on("change","select[name=wishlists]",function(){WishlistChangeDefault("wishlist_block_list",a(this).val())});a(".wishlist").each(function(){current=a(this);a(this).children(".wishlist_button_list").popover({html:true,content:function(){return current.children(".popover-content").html()}})});a(document).on("click",".product_infos .btn_action .wishlist_change_button",function(){if(a(this).parent().find(".popover-content").attr("hidden")==""||a(this).parent().find(".popover-content").attr("hidden")=="hidden"){a(".product_infos .btn_action .popover-content").attr("hidden","hidden");a(this).parent().find(".popover-content").removeAttr("hidden")}else{a(this).parent().find(".popover-content").attr("hidden","hidden")}})});function WishlistCart(f,d,b,a,e,c){$.ajax({type:"GET",url:baseDir+"modules/tvcmswishlist/cart.php?rand="+new Date().getTime(),headers:{"cache-control":"no-cache"},async:true,cache:false,data:"action="+d+"&id_product="+b+"&quantity="+e+"&token="+static_token+"&id_product_attribute="+a+"&id_wishlist="+c,success:function(g){if(d=="add"){if(isLogged==true){wishlistProductsIdsAdd(b);wishlistRefreshStatus();$(".tvcmsdesktop-view-wishlist .cart-wishlist-number").html("("+g+")");$(".tvsticky-wishlist .cart-wishlist-number").html("("+g+")");$html='<div class="tvwishlist-popup success" style="top:'+$("#header").height()+'px"><i class="material-icons">&#xe877</i><p>'+added_to_wishlist+"</p></div>";$("#wrapper").append($html);$(".tvwishlist-popup").slideDown().delay(3000).slideUp(function(){$(this).remove()})}else{$html='<div class="tvwishlist-popup warning" style="top:'+$("#header").height()+'px"><i class="material-icons">&#xe899</i><p>'+loggin_required+"</p></div>";$("#wrapper").append($html);$(".tvwishlist-popup").slideDown().delay(3000).slideUp(function(){$(this).remove()})}}if(d=="delete"){wishlistProductsIdsRemove(b);wishlistRefreshStatus()}if($("#"+f).length!=0){$("#"+f).slideUp("normal");document.getElementById(f).innerHTML=g;$("#"+f).slideDown("normal")}}})}function WishlistChangeDefault(b,a){$.ajax({type:"GET",url:baseDir+"modules/tvcmswishlist/cart.php?rand="+new Date().getTime(),headers:{"cache-control":"no-cache"},async:true,data:"id_wishlist="+a+"&token="+static_token,cache:false,success:function(c){$("#"+b).slideUp("normal");document.getElementById(b).innerHTML=c;$("#"+b).slideDown("normal")}})}function WishlistBuyProduct(e,c,b,a,d,f){if(f){ajaxCart.add(c,b,false,d,1,[e,a])}else{$("#"+a).val(0);WishlistAddProductCart(e,c,b,a);document.forms["addtocart_"+c+"_"+b].method="POST";document.forms["addtocart_"+c+"_"+b].action=baseUri+"?controller=cart";document.forms["addtocart_"+c+"_"+b].elements.token.value=static_token;document.forms["addtocart_"+c+"_"+b].submit()}return(true)}function WishlistAddProductCart(d,c,b,a){if($("#"+a).val()<=0){return(false)}$.ajax({type:"GET",url:baseDir+"modules/tvcmswishlist/buywishlistproduct.php?rand="+new Date().getTime(),headers:{"cache-control":"no-cache"},data:"token="+d+"&static_token="+static_token+"&id_product="+c+"&id_product_attribute="+b,async:true,cache:false,success:function(e){if(e){if(!!$.prototype.fancybox){$.fancybox.open([{type:"inline",autoScale:true,minHeight:30,content:'<p class="fancybox-error">'+e+"</p>"}],{padding:0})}else{alert(e)}}else{$("#"+a).val($("#"+a).val()-1)}}});return(true)}function WishlistManage(b,a){$.ajax({type:"GET",async:true,url:baseDir+"modules/tvcmswishlist/managewishlist.php?rand="+new Date().getTime(),headers:{"cache-control":"no-cache"},data:"id_wishlist="+a+"&refresh="+false,cache:false,success:function(c){$("#"+b).hide();document.getElementById(b).innerHTML=c;$("#"+b).fadeIn("slow");$(".wishlist_change_button").each(function(d){$(this).change(function(){wishlistProductChange($("option:selected",this).attr("data-id-product"),$("option:selected",this).attr("data-id-product-attribute"),$("option:selected",this).attr("data-id-old-wishlist"),$("option:selected",this).attr("data-id-new-wishlist"))})});$("#mywishlist .product-name").balance();$("#hideSendWishlist").trigger("click")}})}function WishlistProductManage(g,e,c,b,a,f,d){$.ajax({type:"GET",async:true,url:baseDir+"modules/tvcmswishlist/managewishlist.php?rand="+new Date().getTime(),headers:{"cache-control":"no-cache"},data:"action="+e+"&id_wishlist="+c+"&id_product="+b+"&id_product_attribute="+a+"&quantity="+f+"&priority="+d+"&refresh="+true,cache:false,success:function(h){if(e=="delete"){$("#wlp_"+b+"_"+a).fadeOut("fast")}else{if(e=="update"){$("#wlp_"+b+"_"+a).fadeOut("fast");$("#wlp_"+b+"_"+a).fadeIn("fast")}}nb_products=0;$("[id^='quantity']").each(function(i,j){nb_products+=parseInt(j.value)});$("#wishlist_"+c).children("td").eq(1).html(nb_products)}})}function WishlistDelete(d,a,c){var b=confirm(c);if(b==false){return(false)}if(typeof wish_link=="undefined"){return(false)}$.ajax({type:"GET",async:true,dataType:"json",url:wish_link,headers:{"cache-control":"no-cache"},cache:false,data:{rand:new Date().getTime(),deleted:1,myajax:1,id_wishlist:a,action:"deletelist"},success:function(g){var e=$("#"+d).siblings().length;$("#"+d).fadeOut("slow").remove();$("#block-order-detail").html("");if(e==0){$("#block-history").remove()}if(g.id_default){var f=$("#wishlist_"+g.id_default+" > .wishlist_default");$("#wishlist_"+g.id_default+" > .wishlist_default > a").remove();f.append('<p class="is_wish_list_default"><i class="icon icon-check-square"></i></p>')}}})}function WishlistDefault(b,a){if(typeof wish_link=="undefined"){return(false)}$.ajax({type:"GET",async:true,url:wish_link,headers:{"cache-control":"no-cache"},cache:false,data:{rand:new Date().getTime(),"default":1,id_wishlist:a,myajax:1,action:"setdefault"},success:function(f){var c=$(".is_wish_list_default").parents("tr").attr("id");var d=$(".is_wish_list_default").parent();$(".is_wish_list_default").remove();d.append('<a href="#" onclick="javascript:event.preventDefault();(WishlistDefault(\''+c+"', '"+c.replace("wishlist_","")+"'));\"><i class='material-icons'>&#xe835</i></a>");var e=$("#"+b+" > .wishlist_default");$("#"+b+" > .wishlist_default > a").remove();e.append("<p class=\"is_wish_list_default\"><i class='material-icons'>&#xe834</i></p>")}})}function WishlistVisibility(a,b){if($("#hide"+b).is(":hidden")){$("."+a).slideDown("fast");$("#show"+b).hide();$("#hide"+b).css("display","block")}else{$("."+a).slideUp("fast");$("#hide"+b).hide();$("#show"+b).css("display","block")}if(b=="SendWishlist"){setTimeout(function(){var c=document.getElementById("wishlist_form").offsetTop;window.scrollTo({top:c,behavior:"smooth"})},200)}}function WishlistSend(d,a,c){var b=$("#email1").val();if(b!=""){$.post(baseDir+"modules/tvcmswishlist/sendwishlist.php",{token:static_token,id_wishlist:a,email1:$("#"+c+"1").val(),email2:$("#"+c+"2").val(),email3:$("#"+c+"3").val(),email4:$("#"+c+"4").val(),email5:$("#"+c+"5").val(),email6:$("#"+c+"6").val(),email7:$("#"+c+"7").val(),email8:$("#"+c+"8").val(),email9:$("#"+c+"9").val(),email10:$("#"+c+"10").val()},function(e){if(e){if(!!$.prototype.fancybox){$.fancybox.open([{type:"inline",autoScale:true,minHeight:30,content:'<p class="fancybox-error">'+e+"</p>"}],{padding:0})}else{alert(e)}}else{WishlistVisibility(d,"hideSendWishlist")}})}}function wishlistProductsIdsAdd(a){if($.inArray(parseInt(a),wishlistProductsIds)==-1){wishlistProductsIds.push(parseInt(a))}}function wishlistProductsIdsRemove(a){wishlistProductsIds.splice($.inArray(parseInt(a),wishlistProductsIds),1)}function wishlistRefreshStatus(){$(".addToWishlist").each(function(){if($.inArray(parseInt($(this).prop("rel")),wishlistProductsIds)!=-1){$(this).addClass("checked")}else{$(this).removeClass("checked")}})}function wishlistProductChange(c,a,d,b){if(typeof wish_link=="undefined"){return(false)}var e=$("#quantity_"+c+"_"+a).val();$.ajax({type:"GET",url:wish_link,headers:{"cache-control":"no-cache"},async:true,cache:false,dataType:"json",data:{id_product:c,id_product_attribute:a,quantity:e,priority:$("#priority_"+c+"_"+a).val(),id_old_wishlist:d,id_new_wishlist:b,myajax:1,action:"productchangewishlist"},success:function(f){if(f.success==true){$("#wlp_"+c+"_"+a).fadeOut("slow");$("#wishlist_"+d+" td:nth-child(2)").text($("#wishlist_"+d+" td:nth-child(2)").text()-e);$("#wishlist_"+b+" td:nth-child(2)").text(+$("#wishlist_"+b+" td:nth-child(2)").text()+ +e)}else{if(!!$.prototype.fancybox){$.fancybox.open([{type:"inline",autoScale:true,minHeight:30,content:'<p class="fancybox-error">'+f.error+"</p>"}],{padding:0})}}}})};