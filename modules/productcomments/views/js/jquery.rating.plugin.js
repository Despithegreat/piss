jQuery.fn.rating=function(c){const a=$(this);a.each(function b(){const j=$(this);var q=c?c:{};if(!q.grade&&j.data("grade")){q.grade=j.data("grade")}if(!q.min&&j.data("min")){q.min=j.data("min")}if(!q.max&&j.data("max")){q.max=j.data("max")}if(!q.input&&j.data("input")){q.input=j.data("input")}var p=jQuery.extend({grade:null,input:null,min:1,max:5,starWidth:20},q);const m=Math.min(p.min,p.max);const h=Math.max(p.min,p.max);const g=Math.min(Math.max(m,p.grade),h);j.html("");j.append('<div class="star-content star-empty clearfix"></div>');j.append('<div class="star-content star-full clearfix"></div>');const i=$(".star-empty",this);const o=$(".star-full",this);const n=$('<div class="star"></div>');const k=$('<div class="star-on"></div>');var f;if(p.input){f=$('<input type="number" name="'+p.input+'" id="'+p.input+'" />');f.val(g);f.css("display","none");f.on("change",e);j.append(f);l()}else{d(g)}function l(){i.html("");o.html("");var t;for(var s=m;s<=h;++s){t=n.clone();t.data("grade",s);t.on("mouseenter mouseleave",function r(){var w=$(".star",o).index($(this));$(".star",o).each(function v(){$(this).removeClass("star-on");var x=$(".star",o).index($(this));if(x<=w){$(this).addClass("star-hover")}else{$(this).removeClass("star-hover")}})});t.on("click",function u(){var v=$(this).data("grade");f.val(v)});o.append(t)}o.on("mouseenter",function(){}).on("mouseleave",e);e()}function e(){$(".star",o).each(function r(){var s=$(this).data("grade");$(this).removeClass("star-hover");if(s<=f.val()){$(this).addClass("star-on")}else{$(this).removeClass("star-on")}})}function d(t){i.html("");o.html("");var s;for(var r=m;r<=h;++r){if(r<=Math.floor(t)){s=n.clone();s.css("visibility","hidden");i.append(s);o.append(k.clone())}else{if(r>Math.ceil(t)){s=n.clone();i.append(s.clone())}else{var u=(t-r+1)*p.starWidth;var v=p.starWidth-u;s=n.clone();s.css("visibility","hidden");s.css("width",u);i.append(s);s=n.clone();s.css("width",v);s.css("background-position","0px -"+u+"px");s.css("background-position","-"+u+"px 0px");s.css("marginLeft",0);i.append(s);k.css("width",u);o.append(k.clone())}}}}})};